{"ast":null,"code":"import _objectSpread from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import WithCard from\"components/container/withCard\";import{fetchUsers,deleteUser}from\"api/db-actions\";import{Button,Dimmer,Loader,Grid}from\"semantic-ui-react\";import{history}from\"App\";var Saved=/*#__PURE__*/function(_React$Component){_inherits(Saved,_React$Component);var _super=_createSuper(Saved);function Saved(){var _this;_classCallCheck(this,Saved);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={users:[],loading:true};return _this;}_createClass(Saved,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var users;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchUsers();case 2:users=_context.sent;this.setState({users:users,loading:false});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var handleDelete=function handleDelete(user_id){_this2.setState(_objectSpread(_objectSpread({},_this2.state),{},{loading:true}));deleteUser(user_id).then(function(){return _this2.setState({users:_this2.state.users.filter(function(user){return user.id!==user_id;}),loading:false});}).catch(function(){return console.log(\"cant deleted...\");});};return/*#__PURE__*/React.createElement(\"div\",null,this.state.loading?/*#__PURE__*/React.createElement(Dimmer,{active:this.state.loading},/*#__PURE__*/React.createElement(Loader,null)):this.state.users.filter(function(user){return user.environment===_this2.props.env;}).length?/*#__PURE__*/React.createElement(Grid,{columns:\"equal\",style:{margin:\"0 15%\"}},/*#__PURE__*/React.createElement(Grid.Row,{centered:true,verticalAlign:\"middle\"},/*#__PURE__*/React.createElement(\"h1\",null,this.props.env)),this.state.users.filter(function(user){return user.environment===_this2.props.env;}).map(function(user,id){return/*#__PURE__*/React.createElement(Grid.Column,{key:id},/*#__PURE__*/React.createElement(WithCard,{card:user,key:id,onDelete:function onDelete(user_id){return handleDelete(user_id);}}));})):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h1\",null,\"There is no saved user\"),/*#__PURE__*/React.createElement(Button,{color:\"green\",onClick:function onClick(){return history.push(\"/\");}},\"Go to Create One\")));}}]);return Saved;}(React.Component);export{Saved as default};","map":{"version":3,"sources":["/Users/berkakgun/Desktop/ttk/ttkui/src/components/display/SavedUsers.tsx"],"names":["React","WithCard","fetchUsers","deleteUser","Button","Dimmer","Loader","Grid","history","Saved","state","users","loading","setState","handleDelete","user_id","then","filter","user","id","catch","console","log","environment","props","env","length","margin","map","push","Component"],"mappings":"2hCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,+BAArB,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,gBAAvC,CACA,OAASC,MAAT,CAAiBC,MAAjB,CAAyBC,MAAzB,CAAiCC,IAAjC,KAA6C,mBAA7C,CACA,OAASC,OAAT,KAAwB,KAAxB,C,GAOqBC,CAAAA,K,mUACnBC,K,CAAoD,CAClDC,KAAK,CAAE,EAD2C,CAElDC,OAAO,CAAE,IAFyC,C,+TAK9BV,CAAAA,UAAU,E,QAAxBS,K,eACN,KAAKE,QAAL,CAAc,CAAEF,KAAK,CAALA,KAAF,CAASC,OAAO,CAAE,KAAlB,CAAd,E,+MAEO,iBACP,GAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,OAAD,CAAqB,CACxC,MAAI,CAACF,QAAL,gCAAmB,MAAI,CAACH,KAAxB,MAA+BE,OAAO,CAAE,IAAxC,IACAT,UAAU,CAACY,OAAD,CAAV,CACGC,IADH,CACQ,iBACJ,CAAA,MAAI,CAACH,QAAL,CAAc,CACZF,KAAK,CAAE,MAAI,CAACD,KAAL,CAAWC,KAAX,CAAiBM,MAAjB,CAAwB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,EAAL,GAAYJ,OAAtB,EAAxB,CADK,CAEZH,OAAO,CAAE,KAFG,CAAd,CADI,EADR,EAOGQ,KAPH,CAOS,iBAAMC,CAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAAN,EAPT,EAQD,CAVD,CAWA,mBACE,+BACG,KAAKZ,KAAL,CAAWE,OAAX,cACC,oBAAC,MAAD,EAAQ,MAAM,CAAE,KAAKF,KAAL,CAAWE,OAA3B,eACE,oBAAC,MAAD,MADF,CADD,CAIG,KAAKF,KAAL,CAAWC,KAAX,CAAiBM,MAAjB,CACA,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACK,WAAL,GAAqB,MAAI,CAACC,KAAL,CAAWC,GAA1C,EADA,EAEAC,MAFA,cAGF,oBAAC,IAAD,EAAM,OAAO,CAAC,OAAd,CAAsB,KAAK,CAAE,CAAEC,MAAM,CAAE,OAAV,CAA7B,eACE,oBAAC,IAAD,CAAM,GAAN,EAAU,QAAQ,KAAlB,CAAmB,aAAa,CAAC,QAAjC,eACE,8BAAK,KAAKH,KAAL,CAAWC,GAAhB,CADF,CADF,CAIG,KAAKf,KAAL,CAAWC,KAAX,CACEM,MADF,CACS,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACK,WAAL,GAAqB,MAAI,CAACC,KAAL,CAAWC,GAA1C,EADT,EAEEG,GAFF,CAEM,SAACV,IAAD,CAAOC,EAAP,qBACH,oBAAC,IAAD,CAAM,MAAN,EAAa,GAAG,CAAEA,EAAlB,eACE,oBAAC,QAAD,EACE,IAAI,CAAED,IADR,CAEE,GAAG,CAAEC,EAFP,CAGE,QAAQ,CAAE,kBAACJ,OAAD,QAAqBD,CAAAA,YAAY,CAACC,OAAD,CAAjC,EAHZ,EADF,CADG,EAFN,CAJH,CAHE,cAoBF,oBAAC,KAAD,CAAO,QAAP,mBACE,uDADF,cAEE,oBAAC,MAAD,EAAQ,KAAK,CAAC,OAAd,CAAsB,OAAO,CAAE,yBAAMP,CAAAA,OAAO,CAACqB,IAAR,CAAa,GAAb,CAAN,EAA/B,qBAFF,CAzBJ,CADF,CAmCD,C,mBAxDgC7B,KAAK,CAAC8B,S,SAApBrB,K","sourcesContent":["import React from \"react\";\nimport WithCard from \"components/container/withCard\";\nimport { fetchUsers, deleteUser } from \"api/db-actions\";\nimport { Button, Dimmer, Loader, Grid } from \"semantic-ui-react\";\nimport { history } from \"App\";\nimport { CardElement } from \"assets/propTypes\";\n\ntype Props = {\n  env: string;\n};\n\nexport default class Saved extends React.Component<Props> {\n  state: { users: CardElement[]; loading: boolean } = {\n    users: [],\n    loading: true,\n  };\n  async componentDidMount() {\n    const users = await fetchUsers();\n    this.setState({ users, loading: false });\n  }\n  render() {\n    const handleDelete = (user_id: string) => {\n      this.setState({ ...this.state, loading: true });\n      deleteUser(user_id)\n        .then(() =>\n          this.setState({\n            users: this.state.users.filter((user) => user.id !== user_id),\n            loading: false,\n          })\n        )\n        .catch(() => console.log(\"cant deleted...\"));\n    };\n    return (\n      <div>\n        {this.state.loading ? (\n          <Dimmer active={this.state.loading}>\n            <Loader />\n          </Dimmer>\n        ) : this.state.users.filter(\n            (user) => user.environment === this.props.env\n          ).length ? (\n          <Grid columns=\"equal\" style={{ margin: \"0 15%\" }}>\n            <Grid.Row centered verticalAlign=\"middle\">\n              <h1>{this.props.env}</h1>\n            </Grid.Row>\n            {this.state.users\n              .filter((user) => user.environment === this.props.env)\n              .map((user, id) => (\n                <Grid.Column key={id}>\n                  <WithCard\n                    card={user}\n                    key={id}\n                    onDelete={(user_id: string) => handleDelete(user_id)}\n                  />\n                </Grid.Column>\n              ))}\n          </Grid>\n        ) : (\n          <React.Fragment>\n            <h1>There is no saved user</h1>\n            <Button color=\"green\" onClick={() => history.push(\"/\")}>\n              Go to Create One\n            </Button>\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}