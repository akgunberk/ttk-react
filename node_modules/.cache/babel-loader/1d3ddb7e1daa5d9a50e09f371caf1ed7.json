{"ast":null,"code":"import _slicedToArray from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useReducer}from\"react\";import{UserContext}from\"core/store/ContextApi/Context\";import{Application}from\"core/db\";import{reducer,AppState}from\"./hooks/loginReducer\";export function AuthGuard(props){var _Application$currentU;var _useState=useState({isLoggedIn:((_Application$currentU=Application.currentUser)===null||_Application$currentU===void 0?void 0:_Application$currentU.state)===\"active\",currentUser:Application.currentUser}),_useState2=_slicedToArray(_useState,2),authState=_useState2[0],setAuthState=_useState2[1];// eslint-disable-next-line\nvar _useReducer=useReducer(reducer,AppState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var handleLogout=function handleLogout(){var _Application$currentU2;(_Application$currentU2=Application.currentUser)===null||_Application$currentU2===void 0?void 0:_Application$currentU2.logOut();dispatch({type:\"userId\",payload:\"\"});};var authInfo=React.useMemo(function(){var isLoggedIn=authState.isLoggedIn,currentUser=authState.currentUser;var value={isLoggedIn:isLoggedIn,currentUser:currentUser,actions:{handleLogout:handleLogout,setAuthState:setAuthState}};return value;},[authState]);return/*#__PURE__*/React.createElement(UserContext.Provider,{value:authInfo},props.children);}","map":{"version":3,"sources":["/Users/berkakgun/Desktop/ttk/ttkui/src/components/AuthGuard.tsx"],"names":["React","useState","useReducer","UserContext","Application","reducer","AppState","AuthGuard","props","isLoggedIn","currentUser","state","authState","setAuthState","dispatch","handleLogout","logOut","type","payload","authInfo","useMemo","value","actions","children"],"mappings":"yJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,WAAT,KAA4B,+BAA5B,CACA,OAASC,WAAT,KAA4B,SAA5B,CACA,OAASC,OAAT,CAAkBC,QAAlB,KAAkC,sBAAlC,CAEA,MAAO,SAASC,CAAAA,SAAT,CAAmBC,KAAnB,CAA+B,yCACFP,QAAQ,CAAC,CACzCQ,UAAU,CAAE,wBAAAL,WAAW,CAACM,WAAZ,sEAAyBC,KAAzB,IAAmC,QADN,CAEzCD,WAAW,CAAEN,WAAW,CAACM,WAFgB,CAAD,CADN,wCAC7BE,SAD6B,eAClBC,YADkB,eAKpC;AALoC,gBAMVX,UAAU,CAACG,OAAD,CAAUC,QAAV,CANA,4CAM7BK,KAN6B,iBAMtBG,QANsB,iBAQpC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,4BACzB,wBAAAX,WAAW,CAACM,WAAZ,wEAAyBM,MAAzB,GACAF,QAAQ,CAAC,CAAEG,IAAI,CAAE,QAAR,CAAkBC,OAAO,CAAE,EAA3B,CAAD,CAAR,CACD,CAHD,CAKA,GAAMC,CAAAA,QAAQ,CAAGnB,KAAK,CAACoB,OAAN,CAAc,UAAM,IAC3BX,CAAAA,UAD2B,CACCG,SADD,CAC3BH,UAD2B,CACfC,WADe,CACCE,SADD,CACfF,WADe,CAEnC,GAAMW,CAAAA,KAAK,CAAG,CACZZ,UAAU,CAAVA,UADY,CAEZC,WAAW,CAAXA,WAFY,CAGZY,OAAO,CAAE,CAAEP,YAAY,CAAZA,YAAF,CAAgBF,YAAY,CAAZA,YAAhB,CAHG,CAAd,CAKA,MAAOQ,CAAAA,KAAP,CACD,CARgB,CAQd,CAACT,SAAD,CARc,CAAjB,CAUA,mBACE,oBAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEO,QAA7B,EACGX,KAAK,CAACe,QADT,CADF,CAKD","sourcesContent":["import React, { useState, useReducer } from \"react\";\nimport { UserContext } from \"core/store/ContextApi/Context\";\nimport { Application } from \"core/db\";\nimport { reducer, AppState } from \"./hooks/loginReducer\";\n\nexport function AuthGuard(props: any) {\n  const [authState, setAuthState] = useState({\n    isLoggedIn: Application.currentUser?.state === \"active\",\n    currentUser: Application.currentUser,\n  });\n  // eslint-disable-next-line\n  const [state, dispatch] = useReducer(reducer, AppState);\n\n  const handleLogout = () => {\n    Application.currentUser?.logOut();\n    dispatch({ type: \"userId\", payload: \"\" });\n  };\n\n  const authInfo = React.useMemo(() => {\n    const { isLoggedIn, currentUser } = authState;\n    const value = {\n      isLoggedIn,\n      currentUser,\n      actions: { handleLogout, setAuthState },\n    };\n    return value;\n  }, [authState]);\n\n  return (\n    <UserContext.Provider value={authInfo}>\n      {props.children}\n    </UserContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}