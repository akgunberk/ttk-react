{"ast":null,"code":"import * as Realm from \"realm-web\";\nimport { mongodb } from \"./db/constants\";\nexport const app = new Realm.App({\n  id: \"ttk-ui-cvkwt\"\n});\nexport const mongo = app.services.mongodb(mongodb.service);\nexport const collection = mongo.db(mongodb.database).collection(mongodb.collection);\nexport async function SignUp(email, password) {\n  try {\n    await app.emailPasswordAuth.registerUser(email, password);\n    return {\n      success: true,\n      error: undefined\n    };\n  } catch (error) {\n    console.log(error);\n    return {\n      success: false,\n      error\n    };\n  }\n}\nexport async function LogIn() {\n  const redirect_uri = \"https://realm.mongodb.com/api/client/v2.0/auth/callback\";\n  const client_id = \"291216037477-tlo72q1hnsl5kk6qph3spkc191mhnfn2.apps.googleusercontent.com\";\n  const url = `https://accounts.google.com/o/oauth2/v2/auth?\n  scope=https%3A//www.googleapis.com/auth/drive.metadata.readonly&\n  include_granted_scopes=true&\n  response_type=token&\n  redirect_uri=${redirect_uri}&\n  client_id=${client_id}`;\n  let gtoken = await fetch(url).then(token => {\n    return token;\n  });\n\n  try {\n    Realm.Credentials.google(gtoken);\n  } catch (err) {\n    console.log(err);\n  }\n}\nexport async function ConfirmUser() {\n  const url = window.location.search;\n  const params = new URLSearchParams(url);\n  const token = params.get(\"token\");\n  const tokenId = params.get(\"tokenId\");\n  return app.emailPasswordAuth.confirmUser(token, tokenId);\n}\nexport function SendResetPasswordEmail(email) {\n  return app.emailPasswordAuth.sendResetPasswordEmail(email).then(() => {\n    console.log(\"Successfully sent password reset email!\");\n  }).catch(err => {\n    console.log(\"Error sending password reset email:\", err);\n  });\n}","map":{"version":3,"sources":["/Users/berkakgun/Desktop/ttk/ttkui/src/core/initApp.js"],"names":["Realm","mongodb","app","App","id","mongo","services","service","collection","db","database","SignUp","email","password","emailPasswordAuth","registerUser","success","error","undefined","console","log","LogIn","redirect_uri","client_id","url","gtoken","fetch","then","token","Credentials","google","err","ConfirmUser","window","location","search","params","URLSearchParams","get","tokenId","confirmUser","SendResetPasswordEmail","sendResetPasswordEmail","catch"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,WAAvB;AAEA,SAASC,OAAT,QAAwB,gBAAxB;AAEA,OAAO,MAAMC,GAAG,GAAG,IAAIF,KAAK,CAACG,GAAV,CAAc;AAAEC,EAAAA,EAAE,EAAE;AAAN,CAAd,CAAZ;AAEP,OAAO,MAAMC,KAAK,GAAGH,GAAG,CAACI,QAAJ,CAAaL,OAAb,CAAqBA,OAAO,CAACM,OAA7B,CAAd;AAEP,OAAO,MAAMC,UAAU,GAAGH,KAAK,CAC5BI,EADuB,CACpBR,OAAO,CAACS,QADY,EAEvBF,UAFuB,CAEZP,OAAO,CAACO,UAFI,CAAnB;AAIP,OAAO,eAAeG,MAAf,CAAsBC,KAAtB,EAA6BC,QAA7B,EAAuC;AAC5C,MAAI;AACF,UAAMX,GAAG,CAACY,iBAAJ,CAAsBC,YAAtB,CAAmCH,KAAnC,EAA0CC,QAA1C,CAAN;AACA,WAAO;AAAEG,MAAAA,OAAO,EAAE,IAAX;AAAiBC,MAAAA,KAAK,EAAEC;AAAxB,KAAP;AACD,GAHD,CAGE,OAAOD,KAAP,EAAc;AACdE,IAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACA,WAAO;AAAED,MAAAA,OAAO,EAAE,KAAX;AAAkBC,MAAAA;AAAlB,KAAP;AACD;AACF;AAED,OAAO,eAAeI,KAAf,GAAuB;AAC5B,QAAMC,YAAY,GAChB,yDADF;AAEA,QAAMC,SAAS,GACb,0EADF;AAEA,QAAMC,GAAG,GAAI;;;;iBAIEF,YAAa;cAChBC,SAAU,EALtB;AAMA,MAAIE,MAAM,GAAG,MAAMC,KAAK,CAACF,GAAD,CAAL,CAAWG,IAAX,CAAiBC,KAAD,IAAW;AAC5C,WAAOA,KAAP;AACD,GAFkB,CAAnB;;AAGA,MAAI;AACF5B,IAAAA,KAAK,CAAC6B,WAAN,CAAkBC,MAAlB,CAAyBL,MAAzB;AACD,GAFD,CAEE,OAAOM,GAAP,EAAY;AACZZ,IAAAA,OAAO,CAACC,GAAR,CAAYW,GAAZ;AACD;AACF;AAED,OAAO,eAAeC,WAAf,GAA6B;AAClC,QAAMR,GAAG,GAAGS,MAAM,CAACC,QAAP,CAAgBC,MAA5B;AACA,QAAMC,MAAM,GAAG,IAAIC,eAAJ,CAAoBb,GAApB,CAAf;AACA,QAAMI,KAAK,GAAGQ,MAAM,CAACE,GAAP,CAAW,OAAX,CAAd;AACA,QAAMC,OAAO,GAAGH,MAAM,CAACE,GAAP,CAAW,SAAX,CAAhB;AAEA,SAAOpC,GAAG,CAACY,iBAAJ,CAAsB0B,WAAtB,CAAkCZ,KAAlC,EAAyCW,OAAzC,CAAP;AACD;AAED,OAAO,SAASE,sBAAT,CAAgC7B,KAAhC,EAAuC;AAC5C,SAAOV,GAAG,CAACY,iBAAJ,CACJ4B,sBADI,CACmB9B,KADnB,EAEJe,IAFI,CAEC,MAAM;AACVR,IAAAA,OAAO,CAACC,GAAR,CAAY,yCAAZ;AACD,GAJI,EAKJuB,KALI,CAKGZ,GAAD,IAAS;AACdZ,IAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ,EAAmDW,GAAnD;AACD,GAPI,CAAP;AAQD","sourcesContent":["import * as Realm from \"realm-web\";\n\nimport { mongodb } from \"./db/constants\";\n\nexport const app = new Realm.App({ id: \"ttk-ui-cvkwt\" });\n\nexport const mongo = app.services.mongodb(mongodb.service);\n\nexport const collection = mongo\n  .db(mongodb.database)\n  .collection(mongodb.collection);\n\nexport async function SignUp(email, password) {\n  try {\n    await app.emailPasswordAuth.registerUser(email, password);\n    return { success: true, error: undefined };\n  } catch (error) {\n    console.log(error);\n    return { success: false, error };\n  }\n}\n\nexport async function LogIn() {\n  const redirect_uri =\n    \"https://realm.mongodb.com/api/client/v2.0/auth/callback\";\n  const client_id =\n    \"291216037477-tlo72q1hnsl5kk6qph3spkc191mhnfn2.apps.googleusercontent.com\";\n  const url = `https://accounts.google.com/o/oauth2/v2/auth?\n  scope=https%3A//www.googleapis.com/auth/drive.metadata.readonly&\n  include_granted_scopes=true&\n  response_type=token&\n  redirect_uri=${redirect_uri}&\n  client_id=${client_id}`;\n  let gtoken = await fetch(url).then((token) => {\n    return token;\n  });\n  try {\n    Realm.Credentials.google(gtoken);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport async function ConfirmUser() {\n  const url = window.location.search;\n  const params = new URLSearchParams(url);\n  const token = params.get(\"token\");\n  const tokenId = params.get(\"tokenId\");\n\n  return app.emailPasswordAuth.confirmUser(token, tokenId);\n}\n\nexport function SendResetPasswordEmail(email) {\n  return app.emailPasswordAuth\n    .sendResetPasswordEmail(email)\n    .then(() => {\n      console.log(\"Successfully sent password reset email!\");\n    })\n    .catch((err) => {\n      console.log(\"Error sending password reset email:\", err);\n    });\n}\n"]},"metadata":{},"sourceType":"module"}