{"ast":null,"code":"import { Stitch, RemoteMongoClient, AnonymousCredential, UserPasswordCredential, UserPasswordAuthProviderClient } from \"mongodb-stitch-browser-sdk\";\nconst client = Stitch.initializeDefaultAppClient(\"ttk-ui-cvkwt\");\nconst db = client.getServiceClient(RemoteMongoClient.factory, \"mongodb-atlas\").db(\"ttk-ui\");\nexport async function fetchUsers(environment) {\n  db.inventory.insertMany([{\n    item: \"journal\",\n    qty: 25,\n    size: {\n      h: 14,\n      w: 21,\n      uom: \"cm\"\n    },\n    status: \"A\"\n  }, {\n    item: \"notebook\",\n    qty: 50,\n    size: {\n      h: 8.5,\n      w: 11,\n      uom: \"in\"\n    },\n    status: \"A\"\n  }, {\n    item: \"paper\",\n    qty: 100,\n    size: {\n      h: 8.5,\n      w: 11,\n      uom: \"in\"\n    },\n    status: \"D\"\n  }, {\n    item: \"planner\",\n    qty: 75,\n    size: {\n      h: 22.85,\n      w: 30,\n      uom: \"cm\"\n    },\n    status: \"D\"\n  }, {\n    item: \"postcard\",\n    qty: 45,\n    size: {\n      h: 10,\n      w: 15.25,\n      uom: \"cm\"\n    },\n    status: \"A\"\n  }]);\n}\nexport async function logDB(email, password) {\n  const credential = new UserPasswordCredential(email, password);\n\n  try {\n    const authedUser = await client.auth.loginWithCredential(credential);\n    console.log(`successfully logged in with id: ${authedUser.id}`);\n    return {\n      success: true,\n      id: authedUser.id,\n      error: undefined\n    };\n  } catch (err) {\n    console.error(`login failed with error: ${err}`);\n    return {\n      success: false,\n      error: err\n    };\n  }\n}\nexport function saveUser(environment) {\n  client.auth.loginWithCredential(new AnonymousCredential()).then(() => {\n    db.collection(environment).insertOne({\n      auth: \"asdnaksjdnasjdhasd\",\n      email: \"berkakgun@email.com\",\n      password: \"123456789\"\n    }).then(result => console.log(`Successfully inserted item with _id: ${result.insertedId}`)).catch(err => console.error(`Failed to insert item: ${err}`));\n  });\n}\nexport async function SignUp(email, password) {\n  const emailPasswordClient = Stitch.defaultAppClient.auth.getProviderClient(UserPasswordAuthProviderClient.factory);\n\n  try {\n    await emailPasswordClient.registerWithEmail(email, password);\n    return {\n      success: true,\n      error: undefined\n    };\n  } catch (err) {\n    console.log(err);\n    return {\n      success: false,\n      error: err\n    };\n  }\n}\nexport async function confirmUser() {\n  const url = window.location.search;\n  const params = new URLSearchParams(url);\n  const token = params.get(\"token\");\n  const tokenId = params.get(\"tokenId\");\n  console.log(token, tokenId); // Confirm the user's email/password account\n\n  const emailPassClient = Stitch.defaultAppClient.auth.getProviderClient(UserPasswordAuthProviderClient.factory);\n  return emailPassClient.confirmUser(token, tokenId);\n}\nexport function resendConfirmation(email) {\n  const emailPassClient = Stitch.defaultAppClient.auth.getProviderClient(UserPasswordAuthProviderClient.factory);\n  emailPassClient.sendResetPasswordEmail(email).then(() => {\n    console.log(\"Successfully sent password reset email!\");\n  }).catch(err => {\n    console.log(\"Error sending password reset email:\", err);\n  });\n}","map":{"version":3,"sources":["/Users/berkakgun/Desktop/ttk/ttkui/src/api/db-actions.js"],"names":["Stitch","RemoteMongoClient","AnonymousCredential","UserPasswordCredential","UserPasswordAuthProviderClient","client","initializeDefaultAppClient","db","getServiceClient","factory","fetchUsers","environment","inventory","insertMany","item","qty","size","h","w","uom","status","logDB","email","password","credential","authedUser","auth","loginWithCredential","console","log","id","success","error","undefined","err","saveUser","then","collection","insertOne","result","insertedId","catch","SignUp","emailPasswordClient","defaultAppClient","getProviderClient","registerWithEmail","confirmUser","url","window","location","search","params","URLSearchParams","token","get","tokenId","emailPassClient","resendConfirmation","sendResetPasswordEmail"],"mappings":"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","sourcesContent":["import {\n  Stitch,\n  RemoteMongoClient,\n  AnonymousCredential,\n  UserPasswordCredential,\n  UserPasswordAuthProviderClient,\n} from \"mongodb-stitch-browser-sdk\";\n\nconst client = Stitch.initializeDefaultAppClient(\"ttk-ui-cvkwt\");\n\nconst db = client\n  .getServiceClient(RemoteMongoClient.factory, \"mongodb-atlas\")\n  .db(\"ttk-ui\");\n\nexport async function fetchUsers(environment) {\n  db.inventory.insertMany([\n    {\n      item: \"journal\",\n      qty: 25,\n      size: { h: 14, w: 21, uom: \"cm\" },\n      status: \"A\",\n    },\n    {\n      item: \"notebook\",\n      qty: 50,\n      size: { h: 8.5, w: 11, uom: \"in\" },\n      status: \"A\",\n    },\n    {\n      item: \"paper\",\n      qty: 100,\n      size: { h: 8.5, w: 11, uom: \"in\" },\n      status: \"D\",\n    },\n    {\n      item: \"planner\",\n      qty: 75,\n      size: { h: 22.85, w: 30, uom: \"cm\" },\n      status: \"D\",\n    },\n    {\n      item: \"postcard\",\n      qty: 45,\n      size: { h: 10, w: 15.25, uom: \"cm\" },\n      status: \"A\",\n    },\n  ]);\n}\n\nexport async function logDB(email, password) {\n  const credential = new UserPasswordCredential(email, password);\n  try {\n    const authedUser = await client.auth.loginWithCredential(credential);\n    console.log(`successfully logged in with id: ${authedUser.id}`);\n    return { success: true, id: authedUser.id, error: undefined };\n  } catch (err) {\n    console.error(`login failed with error: ${err}`);\n    return { success: false, error: err };\n  }\n}\n\nexport function saveUser(environment) {\n  client.auth.loginWithCredential(new AnonymousCredential()).then(() => {\n    db.collection(environment)\n      .insertOne({\n        auth: \"asdnaksjdnasjdhasd\",\n        email: \"berkakgun@email.com\",\n        password: \"123456789\",\n      })\n      .then((result) =>\n        console.log(`Successfully inserted item with _id: ${result.insertedId}`)\n      )\n      .catch((err) => console.error(`Failed to insert item: ${err}`));\n  });\n}\n\nexport async function SignUp(email, password) {\n  const emailPasswordClient = Stitch.defaultAppClient.auth.getProviderClient(\n    UserPasswordAuthProviderClient.factory\n  );\n\n  try {\n    await emailPasswordClient.registerWithEmail(email, password);\n    return { success: true, error: undefined };\n  } catch (err) {\n    console.log(err);\n    return { success: false, error: err };\n  }\n}\n\nexport async function confirmUser() {\n  const url = window.location.search;\n  const params = new URLSearchParams(url);\n  const token = params.get(\"token\");\n  const tokenId = params.get(\"tokenId\");\n  console.log(token, tokenId);\n\n  // Confirm the user's email/password account\n  const emailPassClient = Stitch.defaultAppClient.auth.getProviderClient(\n    UserPasswordAuthProviderClient.factory\n  );\n\n  return emailPassClient.confirmUser(token, tokenId);\n}\n\nexport function resendConfirmation(email) {\n  const emailPassClient = Stitch.defaultAppClient.auth.getProviderClient(\n    UserPasswordAuthProviderClient.factory\n  );\n\n  emailPassClient\n    .sendResetPasswordEmail(email)\n    .then(() => {\n      console.log(\"Successfully sent password reset email!\");\n    })\n    .catch((err) => {\n      console.log(\"Error sending password reset email:\", err);\n    });\n}\n"]},"metadata":{},"sourceType":"module"}