{"ast":null,"code":"import _regeneratorRuntime from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer,useContext}from\"react\";import{Segment,Grid,Form,Button,Divider,Dimmer,Loader}from\"semantic-ui-react\";import{logDB,SignUp}from\"api/db-actions\";import WithMessage from\"../container/withMessage\";import Statistics from\"components/container/statistics\";import{useHistory}from\"react-router\";import{reducer}from\"components/hooks/loginReducer\";import{UserContext}from\"store/ContextApi/UserContext\";import WithModal from\"components/container/withModal\";export var Login=function Login(){var initialState={email:\"\",password:\"\",active:false,error:\"\",modal:false};var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var history=useHistory();var _useContext=useContext(UserContext),setLogged=_useContext.setLogged;var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"active\",payload:true});_context.next=3;return logDB(state.email,state.password).then(function(res){if(res.success){setLogged(true);history.push(\"/\");}else{dispatch({type:\"error\",payload:res.error.message});}});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(){return _ref.apply(this,arguments);};}();var handleSignup=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:\"active\",payload:true});_context2.next=3;return SignUp(state.email,state.password).then(function(res){return res.success?dispatch({type:\"modal\",payload:true}):dispatch({type:\"error\",payload:res.error.message});});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSignup(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(WithModal,{open:{status:state.modal,setStatus:dispatch},header:\"Email Confirmation\",content:\" Please Confirm Your Email and Come Back\",icon:\"mail\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"armut-logo\",title:\"armut-logo\",src:\"https://cdn.armut.com/images/tr:h-70/armut-header-logo-colour@2x.png\"})),/*#__PURE__*/React.createElement(\"div\",{style:{position:\"absolute\",top:\"20%\"}},/*#__PURE__*/React.createElement(WithMessage,{message:!state.error?\"Log in or Sign up so that we can save your precious users\":state.error,header:!state.error?\"Welcome to Armut Test Tool Kit\":\"Upps! Error...\",error:state.error?true:false})),/*#__PURE__*/React.createElement(Dimmer,{active:state.active},/*#__PURE__*/React.createElement(Loader,null)),/*#__PURE__*/React.createElement(Segment,{placeholder:true,style:{margin:\"0\"}},/*#__PURE__*/React.createElement(Grid,{columns:2,relaxed:\"very\",stackable:true},/*#__PURE__*/React.createElement(Grid.Column,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Input,{icon:\"user\",iconPosition:\"left\",type:\"email\",label:\"Email\",placeholder:\"Email\",onChange:function onChange(e,data){return dispatch({type:\"email\",payload:data.value});}}),/*#__PURE__*/React.createElement(Form.Input,{icon:\"lock\",iconPosition:\"left\",label:\"Password\",type:\"password\",placeholder:\"Password\",autoComplete:\"on\",onChange:function onChange(e,data){return dispatch({type:\"password\",payload:data.value});}})),/*#__PURE__*/React.createElement(Button,{content:\"Login\",icon:\"sign in\",primary:true,style:{marginTop:\"10px\"},onClick:handleLogin})),/*#__PURE__*/React.createElement(Grid.Column,{verticalAlign:\"middle\"},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Input,{icon:\"user\",type:\"email\",iconPosition:\"left\",label:\"Email\",placeholder:\"Email\",onChange:function onChange(e,data){return dispatch({type:\"email\",payload:data.value});}}),/*#__PURE__*/React.createElement(Form.Input,{icon:\"lock\",iconPosition:\"left\",label:\"Password\",type:\"password\",placeholder:\"Password\",autoComplete:\"on\",onChange:function onChange(e,data){return dispatch({type:\"password\",payload:data.value});}})),/*#__PURE__*/React.createElement(Button,{content:\"Sign up\",icon:\"signup\",type:\"submit\",color:\"vk\",style:{marginTop:\"10px\"},onClick:handleSignup}))),/*#__PURE__*/React.createElement(Divider,{vertical:true},\"Or\")),/*#__PURE__*/React.createElement(Statistics,null));};export default Login;","map":{"version":3,"sources":["/Users/berkakgun/Desktop/ttk/ttkui/src/components/display/Login.tsx"],"names":["React","useReducer","useContext","Segment","Grid","Form","Button","Divider","Dimmer","Loader","logDB","SignUp","WithMessage","Statistics","useHistory","reducer","UserContext","WithModal","Login","initialState","email","password","active","error","modal","state","dispatch","history","setLogged","handleLogin","type","payload","then","res","success","push","message","handleSignup","status","setStatus","position","top","margin","e","data","value","marginTop"],"mappings":"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","sourcesContent":["import React, { useReducer, useContext } from \"react\";\nimport {\n  Segment,\n  Grid,\n  Form,\n  Button,\n  Divider,\n  Dimmer,\n  Loader,\n} from \"semantic-ui-react\";\nimport { logDB, SignUp } from \"api/db-actions\";\nimport WithMessage from \"../container/withMessage\";\nimport Statistics from \"components/container/statistics\";\nimport { useHistory } from \"react-router\";\nimport { reducer } from \"components/hooks/loginReducer\";\nimport { UserContext } from \"store/ContextApi/UserContext\";\nimport WithModal from \"components/container/withModal\";\n\nexport const Login: React.FC = () => {\n  const initialState = {\n    email: \"\",\n    password: \"\",\n    active: false,\n    error: \"\",\n    modal: false,\n  };\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const history = useHistory();\n  const { setLogged } = useContext(UserContext);\n\n  const handleLogin = async () => {\n    dispatch({ type: \"active\", payload: true });\n    await logDB(state.email, state.password).then((res) => {\n      if (res.success) {\n        setLogged(true);\n        history.push(\"/\");\n      } else {\n        dispatch({ type: \"error\", payload: res.error.message });\n      }\n    });\n  };\n\n  const handleSignup = async () => {\n    dispatch({ type: \"active\", payload: true });\n    await SignUp(state.email, state.password).then((res) =>\n      res.success\n        ? dispatch({ type: \"modal\", payload: true })\n        : dispatch({ type: \"error\", payload: res.error.message })\n    );\n  };\n  return (\n    <React.Fragment>\n      <WithModal\n        open={{ status: state.modal, setStatus: dispatch }}\n        header=\"Email Confirmation\"\n        content=\" Please Confirm Your Email and Come Back\"\n        icon=\"mail\"\n      />\n      <div className=\"logo\">\n        <img\n          alt=\"armut-logo\"\n          title=\"armut-logo\"\n          src=\"https://cdn.armut.com/images/tr:h-70/armut-header-logo-colour@2x.png\"\n        />\n      </div>\n      <div style={{ position: \"absolute\", top: \"20%\" }}>\n        <WithMessage\n          message={\n            !state.error\n              ? \"Log in or Sign up so that we can save your precious users\"\n              : state.error\n          }\n          header={\n            !state.error ? \"Welcome to Armut Test Tool Kit\" : \"Upps! Error...\"\n          }\n          error={state.error ? true : false}\n        />\n      </div>\n\n      <Dimmer active={state.active}>\n        <Loader />\n      </Dimmer>\n      <Segment placeholder style={{ margin: \"0\" }}>\n        <Grid columns={2} relaxed=\"very\" stackable>\n          <Grid.Column>\n            <Form>\n              <Form.Input\n                icon=\"user\"\n                iconPosition=\"left\"\n                type=\"email\"\n                label=\"Email\"\n                placeholder=\"Email\"\n                onChange={(e, data) =>\n                  dispatch({ type: \"email\", payload: data.value })\n                }\n              />\n              <Form.Input\n                icon=\"lock\"\n                iconPosition=\"left\"\n                label=\"Password\"\n                type=\"password\"\n                placeholder=\"Password\"\n                autoComplete=\"on\"\n                onChange={(e, data) =>\n                  dispatch({ type: \"password\", payload: data.value })\n                }\n              />\n            </Form>\n            <Button\n              content=\"Login\"\n              icon=\"sign in\"\n              primary\n              style={{ marginTop: \"10px\" }}\n              onClick={handleLogin}\n            />\n          </Grid.Column>\n\n          <Grid.Column verticalAlign=\"middle\">\n            <Form>\n              <Form.Input\n                icon=\"user\"\n                type=\"email\"\n                iconPosition=\"left\"\n                label=\"Email\"\n                placeholder=\"Email\"\n                onChange={(e, data) =>\n                  dispatch({ type: \"email\", payload: data.value })\n                }\n              />\n              <Form.Input\n                icon=\"lock\"\n                iconPosition=\"left\"\n                label=\"Password\"\n                type=\"password\"\n                placeholder=\"Password\"\n                autoComplete=\"on\"\n                onChange={(e, data) =>\n                  dispatch({ type: \"password\", payload: data.value })\n                }\n              />\n            </Form>\n\n            <Button\n              content=\"Sign up\"\n              icon=\"signup\"\n              type=\"submit\"\n              color=\"vk\"\n              style={{ marginTop: \"10px\" }}\n              onClick={handleSignup}\n            />\n          </Grid.Column>\n        </Grid>\n\n        <Divider vertical>Or</Divider>\n      </Segment>\n\n      <Statistics />\n    </React.Fragment>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}