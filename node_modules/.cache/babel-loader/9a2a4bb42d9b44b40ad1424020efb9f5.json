{"ast":null,"code":"import { Stitch, RemoteMongoClient, AnonymousCredential, UserPasswordCredential } from \"mongodb-stitch-browser-sdk\";\nconst client = Stitch.initializeDefaultAppClient(\"ttk-ui-cvkwt\");\nconst db = client.getServiceClient(RemoteMongoClient.factory, \"mongodb-atlas\").db(\"ttk-ui\");\nexport async function fetchUsers(environment) {\n  return client.auth.loginWithCredential(new AnonymousCredential()).then(() => {\n    db.collection(environment).find().asArray();\n  });\n}\nexport function login(email, password) {\n  const credential = new UserPasswordCredential(email, password);\n  return client.auth.loginWithCredential(credential).then(authedUser => {\n    console.log(`successfully logged in with id: ${authedUser.id}`);\n    return {\n      success: true,\n      id: authedUser.id\n    };\n  }).catch(err => console.error(`login failed with error: ${err}`));\n}\nexport function saveUser(environment) {\n  client.auth.loginWithCredential(new AnonymousCredential()).then(() => {\n    db.collection(environment).insertOne({\n      auth: \"asdnaksjdnasjdhasd\",\n      email: \"berkakgun@email.com\",\n      password: \"123456789\"\n    }).then(result => console.log(`Successfully inserted item with _id: ${result.insertedId}`)).catch(err => console.error(`Failed to insert item: ${err}`));\n  });\n}","map":{"version":3,"sources":["/Users/berkakgun/Desktop/ttk/ttkui/src/api/db-init.js"],"names":["Stitch","RemoteMongoClient","AnonymousCredential","UserPasswordCredential","client","initializeDefaultAppClient","db","getServiceClient","factory","fetchUsers","environment","auth","loginWithCredential","then","collection","find","asArray","login","email","password","credential","authedUser","console","log","id","success","catch","err","error","saveUser","insertOne","result","insertedId"],"mappings":"AAAA,SACEA,MADF,EAEEC,iBAFF,EAGEC,mBAHF,EAIEC,sBAJF,QAKO,4BALP;AAOA,MAAMC,MAAM,GAAGJ,MAAM,CAACK,0BAAP,CAAkC,cAAlC,CAAf;AAEA,MAAMC,EAAE,GAAGF,MAAM,CACdG,gBADQ,CACSN,iBAAiB,CAACO,OAD3B,EACoC,eADpC,EAERF,EAFQ,CAEL,QAFK,CAAX;AAIA,OAAO,eAAeG,UAAf,CAA0BC,WAA1B,EAAuC;AAC5C,SAAON,MAAM,CAACO,IAAP,CAAYC,mBAAZ,CAAgC,IAAIV,mBAAJ,EAAhC,EAA2DW,IAA3D,CAAgE,MAAM;AAC3EP,IAAAA,EAAE,CAACQ,UAAH,CAAcJ,WAAd,EAA2BK,IAA3B,GAAkCC,OAAlC;AACD,GAFM,CAAP;AAGD;AAED,OAAO,SAASC,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAAgC;AACrC,QAAMC,UAAU,GAAG,IAAIjB,sBAAJ,CAA2Be,KAA3B,EAAkCC,QAAlC,CAAnB;AACA,SAAOf,MAAM,CAACO,IAAP,CACJC,mBADI,CACgBQ,UADhB,EAEJP,IAFI,CAEEQ,UAAD,IAAgB;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAa,mCAAkCF,UAAU,CAACG,EAAG,EAA7D;AACA,WAAO;AAAEC,MAAAA,OAAO,EAAE,IAAX;AAAiBD,MAAAA,EAAE,EAAEH,UAAU,CAACG;AAAhC,KAAP;AACD,GALI,EAMJE,KANI,CAMGC,GAAD,IAASL,OAAO,CAACM,KAAR,CAAe,4BAA2BD,GAAI,EAA9C,CANX,CAAP;AAOD;AAED,OAAO,SAASE,QAAT,CAAkBnB,WAAlB,EAA+B;AACpCN,EAAAA,MAAM,CAACO,IAAP,CAAYC,mBAAZ,CAAgC,IAAIV,mBAAJ,EAAhC,EAA2DW,IAA3D,CAAgE,MAAM;AACpEP,IAAAA,EAAE,CAACQ,UAAH,CAAcJ,WAAd,EACGoB,SADH,CACa;AACTnB,MAAAA,IAAI,EAAE,oBADG;AAETO,MAAAA,KAAK,EAAE,qBAFE;AAGTC,MAAAA,QAAQ,EAAE;AAHD,KADb,EAMGN,IANH,CAMSkB,MAAD,IACJT,OAAO,CAACC,GAAR,CAAa,wCAAuCQ,MAAM,CAACC,UAAW,EAAtE,CAPJ,EASGN,KATH,CASUC,GAAD,IAASL,OAAO,CAACM,KAAR,CAAe,0BAAyBD,GAAI,EAA5C,CATlB;AAUD,GAXD;AAYD","sourcesContent":["import {\n  Stitch,\n  RemoteMongoClient,\n  AnonymousCredential,\n  UserPasswordCredential,\n} from \"mongodb-stitch-browser-sdk\";\n\nconst client = Stitch.initializeDefaultAppClient(\"ttk-ui-cvkwt\");\n\nconst db = client\n  .getServiceClient(RemoteMongoClient.factory, \"mongodb-atlas\")\n  .db(\"ttk-ui\");\n\nexport async function fetchUsers(environment) {\n  return client.auth.loginWithCredential(new AnonymousCredential()).then(() => {\n    db.collection(environment).find().asArray();\n  });\n}\n\nexport function login(email, password) {\n  const credential = new UserPasswordCredential(email, password);\n  return client.auth\n    .loginWithCredential(credential)\n    .then((authedUser) => {\n      console.log(`successfully logged in with id: ${authedUser.id}`);\n      return { success: true, id: authedUser.id };\n    })\n    .catch((err) => console.error(`login failed with error: ${err}`));\n}\n\nexport function saveUser(environment) {\n  client.auth.loginWithCredential(new AnonymousCredential()).then(() => {\n    db.collection(environment)\n      .insertOne({\n        auth: \"asdnaksjdnasjdhasd\",\n        email: \"berkakgun@email.com\",\n        password: \"123456789\",\n      })\n      .then((result) =>\n        console.log(`Successfully inserted item with _id: ${result.insertedId}`)\n      )\n      .catch((err) => console.error(`Failed to insert item: ${err}`));\n  });\n}\n"]},"metadata":{},"sourceType":"module"}