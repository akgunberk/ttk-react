{"ast":null,"code":"import _slicedToArray from\"/Users/berkakgun/Desktop/ttk/ttkui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{UserContext}from\"core/store/ContextApi/Context\";import{app}from\"core/db\";export function useStitchAuth(){var context=useContext(UserContext);if(!context){throw new Error(\"useStitchAuth must be used within a StitchAuthProvider\");}return context;}export function AuthGuard(props){var _app$currentUser;var _useState=useState({isLoggedIn:((_app$currentUser=app.currentUser)===null||_app$currentUser===void 0?void 0:_app$currentUser.state)===\"active\",currentUser:app.currentUser}),_useState2=_slicedToArray(_useState,2),authState=_useState2[0],setAuthState=_useState2[1];var handleLogout=function handleLogout(){var _app$currentUser2;return(_app$currentUser2=app.currentUser)===null||_app$currentUser2===void 0?void 0:_app$currentUser2.logOut;};var authInfo=React.useMemo(function(){var isLoggedIn=authState.isLoggedIn,currentUser=authState.currentUser;var value={isLoggedIn:isLoggedIn,currentUser:currentUser,actions:{handleLogout:handleLogout,setAuthState:setAuthState}};return value;},[authState]);return/*#__PURE__*/React.createElement(UserContext.Provider,{value:authInfo},props.children);}","map":{"version":3,"sources":["/Users/berkakgun/Desktop/ttk/ttkui/src/components/AuthGuard.tsx"],"names":["React","useContext","useState","UserContext","app","useStitchAuth","context","Error","AuthGuard","props","isLoggedIn","currentUser","state","authState","setAuthState","handleLogout","logOut","authInfo","useMemo","value","actions","children"],"mappings":"yJAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,KAA4C,OAA5C,CACA,OAASC,WAAT,KAA4B,+BAA5B,CACA,OAASC,GAAT,KAAoB,SAApB,CAEA,MAAO,SAASC,CAAAA,aAAT,EAAyB,CAC9B,GAAMC,CAAAA,OAAO,CAAGL,UAAU,CAACE,WAAD,CAA1B,CACA,GAAI,CAACG,OAAL,CAAc,CACZ,KAAM,IAAIC,CAAAA,KAAJ,0DAAN,CACD,CACD,MAAOD,CAAAA,OAAP,CACD,CAED,MAAO,SAASE,CAAAA,SAAT,CAAmBC,KAAnB,CAA+B,oCACFP,QAAQ,CAAC,CACzCQ,UAAU,CAAE,mBAAAN,GAAG,CAACO,WAAJ,4DAAiBC,KAAjB,IAA2B,QADE,CAEzCD,WAAW,CAAEP,GAAG,CAACO,WAFwB,CAAD,CADN,wCAC7BE,SAD6B,eAClBC,YADkB,eAMpC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,kDAAMX,GAAG,CAACO,WAAV,4CAAM,kBAAiBK,MAAvB,EAArB,CACA,GAAMC,CAAAA,QAAQ,CAAGjB,KAAK,CAACkB,OAAN,CAAc,UAAM,IAC3BR,CAAAA,UAD2B,CACCG,SADD,CAC3BH,UAD2B,CACfC,WADe,CACCE,SADD,CACfF,WADe,CAEnC,GAAMQ,CAAAA,KAAK,CAAG,CACZT,UAAU,CAAVA,UADY,CAEZC,WAAW,CAAXA,WAFY,CAGZS,OAAO,CAAE,CAAEL,YAAY,CAAZA,YAAF,CAAgBD,YAAY,CAAZA,YAAhB,CAHG,CAAd,CAKA,MAAOK,CAAAA,KAAP,CACD,CARgB,CAQd,CAACN,SAAD,CARc,CAAjB,CASA,mBACE,oBAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEI,QAA7B,EACGR,KAAK,CAACY,QADT,CADF,CAKD","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { UserContext } from \"core/store/ContextApi/Context\";\nimport { app } from \"core/db\";\n\nexport function useStitchAuth() {\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error(`useStitchAuth must be used within a StitchAuthProvider`);\n  }\n  return context;\n}\n\nexport function AuthGuard(props: any) {\n  const [authState, setAuthState] = useState({\n    isLoggedIn: app.currentUser?.state === \"active\",\n    currentUser: app.currentUser,\n  });\n\n  const handleLogout = () => app.currentUser?.logOut;\n  const authInfo = React.useMemo(() => {\n    const { isLoggedIn, currentUser } = authState;\n    const value = {\n      isLoggedIn,\n      currentUser,\n      actions: { handleLogout, setAuthState },\n    };\n    return value;\n  }, [authState]);\n  return (\n    <UserContext.Provider value={authInfo}>\n      {props.children}\n    </UserContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}